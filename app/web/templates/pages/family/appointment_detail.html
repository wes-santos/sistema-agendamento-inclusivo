{# web/templates/pages/family/appointment_detail.html #}
{% extends "_base/base.html" %}
{% set body_class = 'page-family page-family-appointment-detail' %}
{% from "components/card.html" import card %}
{% from "components/badge.html" import status_badge %}

{% block title %}Agendamento — Detalhes{% endblock %}

{% block extra_css %}
<style>
  .dl.grid-2 {display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
  .dl dt {font-weight:600;color:var(--muted);margin:0 0 .25rem}
  .dl dd {margin:0}
  .detail-head {display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-bottom:.5rem}
  .detail-title {font-size:1.1rem;font-weight:700}
  .detail-sub {color:var(--muted)}
  .btnbar {display:flex;gap:.5rem;flex-wrap:wrap}
  .mt-4{margin-top:1rem}
  .hstack{display:flex;gap:.5rem;align-items:center}
  .only-desktop{display:none}@media(min-width:768px){.only-desktop{display:flex}}
  .only-mobile{display:flex}@media(min-width:768px){.only-mobile{display:none}}
</style>
{% endblock %}

{% block content %}
{% set breadcrumbs = [{'label':'Família', 'href':'/family/appointments'}, {'label':'Detalhes'}] %}
{% include "_partials/breadcrumbs.html" %}

{% set header_actions %}
<div class="btnbar only-desktop">
  <a class="btn btn--ghost" href="/family/dashboard">Voltar ao painel</a>
  <a class="btn btn--ghost" href="/family/appointments">Voltar aos agendamentos</a>
  {% if appointment.confirm_url %}<a class="btn btn--success" href="{{ appointment.confirm_url }}">Confirmar presença</a>{% endif %}
  {% if appointment.cancel_url %}<a class="btn btn--danger" href="{{ appointment.cancel_url }}">Cancelar</a>{% endif %}
</div>
{% endset %}

{% call card(title=appointment.service_name, subtitle=appointment.professional_name, actions_html=header_actions) %}
<dl class="dl grid-2">
    <div>
        <dt>Início</dt>
        <dd>{{ appointment.starts_at_local }}</dd>
    </div>
    {% if appointment.ends_at_local %}<div>
        <dt>Fim</dt>
        <dd>{{ appointment.ends_at_local }}</dd>
    </div>{% endif %}
    {% if appointment.location %}<div>
        <dt>Local</dt>
        <dd>{{ appointment.location }}</dd>
    </div>{% endif %}
    <div>
        <dt>Status</dt>
        <dd>{{ status_badge(appointment.status) }}</dd>
    </div>
</dl>
<div class="mt-4 btnbar only-mobile">
  <a class="btn btn--ghost" href="/family/dashboard">Voltar ao painel</a>
  <a class="btn btn--ghost" href="/family/appointments">Voltar aos agendamentos</a>
  {% if appointment.confirm_url %}<a class="btn btn--success" href="{{ appointment.confirm_url }}">Confirmar presença</a>{% endif %}
  {% if appointment.cancel_url %}<a class="btn btn--danger" href="{{ appointment.cancel_url }}">Cancelar</a>{% endif %}
</div>
{% endcall %}
{% endblock %}
